<h2 class="container text-center">Please provide your credentials in the form below</h2>

<form action="/login" method="post">

  <div class="form-row align-items-center" id="user-input-center">
    <div class="col-md-2">
      <label for="username"><b>Username</b></label>
      <input type="text" placeholder="Enter Username" name="username" required> <br> <br>
  
      <label for="password"><b>Password</b></label>
      <input type="password" placeholder="Enter Password" name="password" required> <br> <br>
  
      <label>
        <input type="checkbox" checked="checked" name="remember"> Remember me
      </label>
      <br>
      <span class="psw"><a href="/resetpassword">Forgot password?</a></span>
      <br>
      <span class="psw"><a href="/signup">Don't have a user?</a></span>
      <br>
    </div>
  </div>
  
    <div class="container text-center" id="submit-bar">
      <button type="submit">Login</button>
      <button type="button" class="cancelbtn">Cancel</button>
    </div>
</form> 

<script>
  
  // Function to get pathvariables from link
  function getQueryVariable(variable) {
        let query = window.location.search.substring(1);
        let vars = query.split('&');
        for (let i=0;i<vars.length;i++) {
                let pair = vars[i].split('=');
                if(pair[0] == variable) {
                    return pair[1];
                  }
        }
        return(false);
  }

const status = getQueryVariable('status');

switch(status) {

  // User tried to comment without being logged in
    case 'notloggedincomment':
      console.log("not logged in")
      sweetAlert(
        'Error',
        'Login to comment'
        );
      break;
    
  // User tried to access upload page without being logged in
  case 'notloggedinupload':
    sweetAlert(
      'Error',
      'Login to upload video'
      );
    break;

  // User provided username and password that does not match
  case 'usernameandpasswordnotmatch':
    sweetAlert(
      'Error',
      'Username and password does not match'
      );
    break;

  // User troed to login with invalid username
  case 'userdoesnotexist':
    sweetAlert(
      'Error',
      'User does not exist'
      );
    break;

  // User tried to create user with too short password
  case 'passwordnotok':
    sweetAlert(
      'Error',
      'Password must be longer than 7 digits/characters'
      );
    break;

  // User tried to create a user with a username that already exists
  case 'userexists':
    sweetAlert(
      'Error',
      'User already exists'
      );
    break;

  // User tried to create a user and provided passwords that does not match
  case 'passwordnomatch':
    sweetAlert(
      'Error',
      'Passwords does not match'
      );
    break;
    
  // User tried to create a user, but missed some fields
  case 'missingfields':
    sweetAlert(
      'Error',
      'Missing information: username, password, passwordRepeat'
      );
    break;

  // User signed up successfully
  case 'signedup':
    sweetAlert(
      'Success',
      'Please log in with your new credentials'
      );
    break;
    
  // User asked for a reset mail
  case 'resetmailsent':
    sweetAlert(
      'Success',
      'Mail sent. Please follow the directions provided in it'
      );
    break;

  // User requested a password change
  case 'passwordresetsuccess':
    sweetAlert(
      'Success',
      'Password successfully changed, log in with new credentials'
      );
    break;

  default:
    break;
}
</script>