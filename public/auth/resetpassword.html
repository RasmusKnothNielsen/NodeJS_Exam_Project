<h2 class="container text-center">Reset password page</h2>

<div class="form-row align-items-center" id="user-input-center">
  <form action="/passwordreset" method="post">
      <div class="form-row align-items-center">
        <div class="col-md-2">
        
          <label for="password"><b>Password</b></label>
          <input type="password" placeholder="Enter Password" name="password" required> <br><br>
    
          <label for="passwordRepeat"><b>Password</b></label>
          <input type="password" placeholder="Repeat Password" name="passwordRepeat" required> <br><br>

          <input type="hidden" placeholder="Enter Username" name="username" id="username" required> 
          <input type="hidden" placeholder="Enter token" name="token" id="token" required> 
          
        </div>
      </div>

      <div class="container text-center" id="submit-bar">
        <button type="submit">Reset password</button>
        <button type="button" class="cancelbtn">Cancel</button>
      </div>
  </div>
  
</form> 

<script>
    // Function to get pathvariables from link
    function getQueryVariable(variable) {
       let query = window.location.search.substring(1);
       let vars = query.split('&');
       for (let i=0;i<vars.length;i++) {
               let pair = vars[i].split('=');
               if(pair[0] == variable) {
                   return pair[1];
                }
       }
       return(false);
    }
    // If we can do the next line, there is at least one pathvariable
    const token = getQueryVariable('token');
    const username = getQueryVariable('username');
    $('#token').val(token);
    $('#username').val(username);
    
</script>